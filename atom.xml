<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>xudshen&#39;s blog</title>
  <subtitle>Be good!</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://xudshen.info/"/>
  <updated>2016-03-21T06:29:26.000Z</updated>
  <id>http://xudshen.info/</id>
  
  <author>
    <name>Xudong Shen</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Introducing DroidData (Preliminary)</title>
    <link href="http://xudshen.info/2016/03/07/introducing-droiddata/"/>
    <id>http://xudshen.info/2016/03/07/introducing-droiddata/</id>
    <published>2016-03-07T07:34:24.000Z</published>
    <updated>2016-03-21T06:29:26.000Z</updated>
    
    <content type="html">&lt;p&gt;There are already lots of discussions about the architecture of a quality android application, such as &lt;a href=&quot;https://github.com/pedrovgs/EffectiveAndroidUI/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;EffectiveAndroidUI&lt;/a&gt;, &lt;a href=&quot;http://fernandocejas.com/2014/09/03/architecting-android-the-clean-way/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Android-CleanArchitecture&lt;/a&gt;, which use some common patterns like MVC, MVP or MVVM. However, what we are going to talk about in this post is not which one of these architectures is the best, but some kind solution while implementing these architectures.&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;query-update-data-and-display-in-view&quot;&gt;&lt;a href=&quot;#query-update-data-and-display-in-view&quot; class=&quot;headerlink&quot; title=&quot;query/update data and display in view&quot;&gt;&lt;/a&gt;query/update data and display in view&lt;/h1&gt;&lt;p&gt;We all meet this kind of use case while using a MVP/MVVM pattern as the diagram shows:&lt;br&gt;&lt;img src=&quot;DroidData.1.jpg&quot; alt=&quot;Old Way&quot;&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;View&lt;/code&gt; requests/updates data to &lt;code&gt;Presenter/ViewModel&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Presenter/ViewModel&lt;/code&gt; requests/updates data to &lt;code&gt;ModelDao&lt;/code&gt;(the &lt;code&gt;Business Logic&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ModelDao&lt;/code&gt; retrieves data(in the form of &lt;code&gt;Model&lt;/code&gt;) from &lt;code&gt;Database&lt;/code&gt;/&lt;code&gt;Web/Remote&lt;/code&gt; and returns to &lt;code&gt;Presenter&lt;/code&gt;&lt;br&gt;or &lt;code&gt;ModelDao&lt;/code&gt; updates data to &lt;code&gt;Database&lt;/code&gt;/&lt;code&gt;Web/Remote&lt;/code&gt; and returns result to &lt;code&gt;Presenter&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Presenter&lt;/code&gt; updates &lt;code&gt;View&lt;/code&gt; with retrieved data or the result&lt;/li&gt;
&lt;li&gt;if we use a RecyclerView, &lt;code&gt;Presenter&lt;/code&gt; will need update &lt;code&gt;Adapter&lt;/code&gt; to update RecyclerView&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;As we can see, &lt;code&gt;Presenter&lt;/code&gt; part acts as two roles: manipulates data with &lt;code&gt;ModelDao&lt;/code&gt; and displays data to &lt;code&gt;View&lt;/code&gt;.&lt;br&gt;Coding often becomes trivial when we implementing the displaying part and complicated when we updating different views with the same data source.&lt;br&gt;Taking an Excel app for example, displaying all the records requires code like &lt;code&gt;EditText.setText()&lt;/code&gt; to bind data with a RecyclerView. Also modifying record requires code to find that specific record in RecyclerView or the corresponding record in detail view, and update them.&lt;br&gt;(Show a diagram here)&lt;/p&gt;
&lt;p&gt;We can skip &lt;code&gt;EditText.setText()&lt;/code&gt; part by taking the advantage of Google’s &lt;a href=&quot;http://developer.android.com/tools/data-binding/guide.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Data Binding&lt;/a&gt; library.&lt;br&gt;But what if we go further and more aggressive and directly bind Database with view through some way, then all the &lt;code&gt;Presenter&lt;/code&gt; has to do is updating the Database. &lt;code&gt;Presenter&lt;/code&gt; doesn’t need to care when the record is changed or which one of record is changed.&lt;br&gt;That is where the DroidData based on.&lt;/p&gt;
&lt;h1 id=&quot;DroidData&quot;&gt;&lt;a href=&quot;#DroidData&quot; class=&quot;headerlink&quot; title=&quot;DroidData&quot;&gt;&lt;/a&gt;DroidData&lt;/h1&gt;&lt;p&gt;DroidData uses &lt;a href=&quot;http://developer.android.com/tools/data-binding/guide.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Data Binding&lt;/a&gt;(bind data to view), &lt;a href=&quot;http://developer.android.com/guide/topics/providers/content-providers.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ContentProvider&lt;/a&gt;(a native android library providing mechanisms to query data and notify data changes), &lt;a href=&quot;https://github.com/greenrobot/greenDAO&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GreenDao&lt;/a&gt;(a light &amp;amp; fast ORM solution for manipulating data in SQLite Databases) to accomplish above goal.&lt;br&gt;&lt;img src=&quot;DroidData.2.jpg&quot; alt=&quot;Old Way&quot;&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;View&lt;/code&gt; requests/updates data to &lt;code&gt;Presenter/ViewModel&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Presenter/ViewModel&lt;/code&gt; requests/updates data to &lt;code&gt;ModelDao&lt;/code&gt;(the &lt;code&gt;Business Logic&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ModelDao&lt;/code&gt; determines if need retrieve data from &lt;code&gt;Web/Remote&lt;/code&gt; and saves data to &lt;code&gt;Database&lt;/code&gt;;&lt;br&gt;&lt;code&gt;ModelDao&lt;/code&gt; updates data to &lt;code&gt;Database&lt;/code&gt; or updates data to &lt;code&gt;Web/Remote&lt;/code&gt; then saves result to &lt;code&gt;Database&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ModelDao&lt;/code&gt; asynchronously notifies &lt;code&gt;ModelObservable&lt;/code&gt;/&lt;code&gt;ContentProvider&lt;/code&gt; that data source has changed&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ModelObservable&lt;/code&gt;/&lt;code&gt;ContentProvider&lt;/code&gt; notifies &lt;code&gt;View&lt;/code&gt;/&lt;code&gt;RecyclerView&lt;/code&gt;, and &lt;code&gt;View&lt;/code&gt;/&lt;code&gt;RecyclerView&lt;/code&gt; gets refreshed with new data&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The step4 and step5 are auto triggered with the generated code by DroidData. This will make our code more &lt;/p&gt;
&lt;h1 id=&quot;efficiency-concern-and-violation-of-pattern&quot;&gt;&lt;a href=&quot;#efficiency-concern-and-violation-of-pattern&quot; class=&quot;headerlink&quot; title=&quot;efficiency concern and violation of pattern&quot;&gt;&lt;/a&gt;efficiency concern and violation of pattern&lt;/h1&gt;&lt;p&gt;All the notifications are triggered by the native ContentProvider.Also, DroidData provides a &lt;code&gt;DDCursorRecyclerAdapter&lt;/code&gt; to bind database with view by &lt;code&gt;Cursor&lt;/code&gt;, and ModelObservable map is stored with WeakReference.&lt;/p&gt;
&lt;p&gt;It seems that DroidData violated the MV* pattern to some extent, because we connect &lt;code&gt;View&lt;/code&gt; and &lt;code&gt;Model&lt;/code&gt; directly. From another point of view, we actually connect &lt;code&gt;View&lt;/code&gt; with ContentProvider which can also be considered as &lt;code&gt;Presenter&lt;/code&gt;. Furthermore, DroidData makes test more straightforward. We can test the &lt;code&gt;Presenter&lt;/code&gt; without the &lt;code&gt;View&lt;/code&gt;.&lt;/p&gt;
&lt;h1 id=&quot;conclusion&quot;&gt;&lt;a href=&quot;#conclusion&quot; class=&quot;headerlink&quot; title=&quot;conclusion&quot;&gt;&lt;/a&gt;conclusion&lt;/h1&gt;&lt;!---
retrieve data from db and internet
  handle all the other queries
  do special logic depending on the internet connectivity

when we use list, for the efficiency, we need load data with pagination,
  this also requires we judge when we should load local/remote

with cursorAdapter, we could load all the data in db. after that, we can do the load more action on the end of the list



furthermore, when we need update/insert/delete item in that list, we should notify the cursor with data changes. this is also some repeat? code
how could we get notified when the data has changed? With Android ContentProvider, we could achieve this, even ContentProvider is meant to share 
data between applications(We could disable it by add some restrictions).


what if we combine this two, we could change data, then notify ContentProvider -&gt; Cursor -&gt; View.




because we only read data from cursor, even though it is somehow disobey the rule of MVC,
this make the unit test much more easier 



Android DataBinding -&gt; part of MVC, more like MVP

&quot;some of the architectural aspects employed in Android violate the very basic principles of MVC/MVP&quot;


Activity (and Fragment) is bad candidate for MVC view – it is too tightly coupled with Android framework
it is simply impossible to work around it and implement a proper MVC/MVP



make the CursorAdapter part is the presenter part

non-trivial


1. update one place, notify all place
2. decrease duplicate code
3. easy to test
--&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;There are already lots of discussions about the architecture of a quality android application, such as &lt;a href=&quot;https://github.com/pedrovgs/EffectiveAndroidUI/&quot;&gt;EffectiveAndroidUI&lt;/a&gt;, &lt;a href=&quot;http://fernandocejas.com/2014/09/03/architecting-android-the-clean-way/&quot;&gt;Android-CleanArchitecture&lt;/a&gt;, which use some common patterns like MVC, MVP or MVVM. However, what we are going to talk about in this post is not which one of these architectures is the best, but some kind solution while implementing these architectures.&lt;/p&gt;
    
    </summary>
    
    
      <category term="Android" scheme="http://xudshen.info/tags/Android/"/>
    
      <category term="MVVM" scheme="http://xudshen.info/tags/MVVM/"/>
    
      <category term="DataBinding" scheme="http://xudshen.info/tags/DataBinding/"/>
    
      <category term="GreenDao" scheme="http://xudshen.info/tags/GreenDao/"/>
    
  </entry>
  
  <entry>
    <title>List All Classes after Multidex</title>
    <link href="http://xudshen.info/2014/11/12/list-all-classes-after-multidex/"/>
    <id>http://xudshen.info/2014/11/12/list-all-classes-after-multidex/</id>
    <published>2014-11-12T11:02:29.000Z</published>
    <updated>2014-11-12T17:05:39.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;Intro&quot;&gt;&lt;a href=&quot;#Intro&quot; class=&quot;headerlink&quot; title=&quot;Intro&quot;&gt;&lt;/a&gt;Intro&lt;/h2&gt;&lt;p&gt;Google recently posted an &lt;a href=&quot;http://developer.android.com/tools/building/multidex.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;article&lt;/a&gt; to solve the &lt;code&gt;65K Reference Limit&lt;/code&gt; problem.&lt;br&gt;It is such a relief that we will not need to worry about the following errors any more.&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Conversion to Dalvik format failed:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Unable to execute dex: method ID not in [&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0xffff&lt;/span&gt;]: &lt;span class=&quot;number&quot;&gt;65536&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//--or--&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;trouble writing output:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Too many field references: &lt;span class=&quot;number&quot;&gt;131000&lt;/span&gt;; max is &lt;span class=&quot;number&quot;&gt;65536&lt;/span&gt;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;You may &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; using --multi-dex option.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Problem&quot;&gt;&lt;a href=&quot;#Problem&quot; class=&quot;headerlink&quot; title=&quot;Problem&quot;&gt;&lt;/a&gt;Problem&lt;/h2&gt;&lt;p&gt;After configuring multidex in the module, some projects may encounter the loss of part of the the classes when using reflection to list all the classes in the apk.&lt;br&gt;The usual code may like this:&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//get the apk path&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;String path = context.getPackageManager().getApplicationInfo(context.getPackageName(), &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;).sourceDir;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//use DexFile the unzip the apk, find the *classes.dex* in the apk&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DexFile dexfile = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; DexFile(path);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//get all the classes in this dex&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Enumeration&amp;lt;String&amp;gt; dexEntries = dexfile.entries();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; (dexEntries.hasMoreElements()) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    classNames.add(dexEntries.nextElement());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;Clue-1&quot;&gt;&lt;a href=&quot;#Clue-1&quot; class=&quot;headerlink&quot; title=&quot;Clue 1&quot;&gt;&lt;/a&gt;Clue 1&lt;/h2&gt;&lt;p&gt;It’s easy to get the source code of &lt;code&gt;DexFile.java&lt;/code&gt;,&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;DexFile.java&lt;/span&gt;&lt;a href=&quot;https://android.googlesource.com/platform/libcore-snapshot/+/ics-mr1/dalvik/src/main/java/dalvik/system/DexFile.java&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;link&lt;/a&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * Opens a DEX file from a given filename. This will usually be a ZIP/JAR&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * file with a &quot;classes.dex&quot; inside.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; *&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;DexFile&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String fileName)&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; IOException &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;We can find out that the &lt;code&gt;DexFile&lt;/code&gt; constructor only loads the &lt;code&gt;classes.dex&lt;/code&gt; in the apk, while the file structure in the apk should be like this:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;test.apk&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;├── classes.dex&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;└── classes2.dex&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;It means that the classes in &lt;code&gt;classes2.dex&lt;/code&gt; will not be opened by default constructor.&lt;/p&gt;
&lt;p&gt;And the post by Google says that,&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;… it is possible that other included libraries have additional dependency requirements including the use of introspection or invocation of Java methods from native code.&lt;br&gt;Some libraries may not be able to be used until the multidex build tools are updated to allow you to specify classes that must be included in the primary dex file.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;If we want to load all the classes in our project, we will need load the &lt;code&gt;classes2.dex&lt;/code&gt;, &lt;code&gt;classes3.dex&lt;/code&gt; manually.&lt;/p&gt;
&lt;h2 id=&quot;Clue-2&quot;&gt;&lt;a href=&quot;#Clue-2&quot; class=&quot;headerlink&quot; title=&quot;Clue 2&quot;&gt;&lt;/a&gt;Clue 2&lt;/h2&gt;&lt;p&gt;Also from the post, we can find out that all the multi dex tasks start at &lt;code&gt;MultiDex.install(context)&lt;/code&gt;(in &lt;a href=&quot;https://android.googlesource.com/platform/frameworks/multidex/+/ddd65a611834d9a9222603b2e85d558265f0aa85/library/src/android/support/multidex/MultiDex.java&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MultiDex.java&lt;/a&gt;), which calls the &lt;code&gt;MultiDexExtractor.load(context, applicationInfo, dexDir, false)&lt;/code&gt;(in &lt;a href=&quot;https://android.googlesource.com/platform/frameworks/multidex/+/ddd65a611834d9a9222603b2e85d558265f0aa85/library/src/android/support/multidex/MultiDexExtractor.java&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MultiDexExtractor.java&lt;/a&gt;) to extract the apk and install extra dex files.&lt;/p&gt;
&lt;p&gt;And we can find a method called &lt;code&gt;MultiDexExtractor.loadExistingExtractions(...)&lt;/code&gt; which can load existing secondary dex files that extracted by &lt;code&gt;MultiDexExtractor.load(...)&lt;/code&gt;.&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//applicationInfo = context.getPackageManager().getApplicationInfo(context.getPackageName(), 0)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//sourceApk       = new File(applicationInfo.sourceDir)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//                  ie: test.apk&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//dexDir          = new File(applicationInfo.dataDir, SECONDARY_FOLDER_NAME); (in MultiDex.java)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//                  ie: /data/data/info.xudshen.test/code_cache/secondary-dexes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; List&amp;lt;File&amp;gt; &lt;span class=&quot;title&quot;&gt;loadExistingExtractions&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(Context context, File sourceApk, File dexDir)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; IOException &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Log.i(TAG, &lt;span class=&quot;string&quot;&gt;&quot;loading existing secondary dex files&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//the prefix of extracted file, ie: test.classes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; String extractedFilePrefix = sourceApk.getName() + EXTRACTED_NAME_EXT;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//the total dex numbers&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; totalDexNumber = getMultiDexPreferences(context).getInt(KEY_DEX_NUMBER, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;final&lt;/span&gt; List&amp;lt;File&amp;gt; files = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;File&amp;gt;(totalDexNumber);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; secondaryNumber = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;; secondaryNumber &amp;lt;= totalDexNumber; secondaryNumber++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//for each dex file, ie: test.classes2.zip, test.classes3.zip...&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        String fileName = extractedFilePrefix + secondaryNumber + EXTRACTED_SUFFIX;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        File extractedFile = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; File(dexDir, fileName);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (extractedFile.isFile()) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            files.add(extractedFile);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//verify the zip file&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!verifyZipFile(extractedFile)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                Log.i(TAG, &lt;span class=&quot;string&quot;&gt;&quot;Invalid zip file: &quot;&lt;/span&gt; + extractedFile);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;string&quot;&gt;&quot;Invalid ZIP file.&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;string&quot;&gt;&quot;Missing extracted secondary dex file &#39;&quot;&lt;/span&gt; +&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    extractedFile.getPath() + &lt;span class=&quot;string&quot;&gt;&quot;&#39;&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; files;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;The code indicates that all the extra dex files are extracted in &lt;code&gt;/data/data/&amp;lt;packageName&amp;gt;/code_cache/secondary-dexes&lt;/code&gt;. What we need to do is getting the paths and passing it to &lt;code&gt;DexFile&lt;/code&gt; constructor.&lt;/p&gt;
&lt;p&gt;Unfortunately, we can not call this method directly since &lt;code&gt;MultiDexExtractor.java&lt;/code&gt; is a private class.&lt;br&gt;We will implement this part of code in our own project.&lt;/p&gt;
&lt;h2 id=&quot;Solution&quot;&gt;&lt;a href=&quot;#Solution&quot; class=&quot;headerlink&quot; title=&quot;Solution&quot;&gt;&lt;/a&gt;Solution&lt;/h2&gt;&lt;p&gt;Here is the complete code in Gist.&lt;br&gt;This solution is based on &lt;a href=&quot;https://android.googlesource.com/platform/frameworks/multidex/+/ddd65a611834d9a9222603b2e85d558265f0aa85&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;platform/frameworks/multidex ddd65a611834d9a9222603b2e85d558265f0aa85&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;We will need update the code once the extract path changes in &lt;code&gt;MultiDex.java&lt;/code&gt;.&lt;/p&gt;
&lt;script src=&quot;//gist.github.com/0a5e1a2a2814510f7f5a.js&quot;&gt;&lt;/script&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Intro&quot;&gt;&lt;a href=&quot;#Intro&quot; class=&quot;headerlink&quot; title=&quot;Intro&quot;&gt;&lt;/a&gt;Intro&lt;/h2&gt;&lt;p&gt;Google recently posted an &lt;a href=&quot;http://developer.android.com/tools/building/multidex.html&quot;&gt;article&lt;/a&gt; to solve the &lt;code&gt;65K Reference Limit&lt;/code&gt; problem.&lt;br&gt;It is such a relief that we will not need to worry about the following errors any more.&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Conversion to Dalvik format failed:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Unable to execute dex: method ID not in [&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0xffff&lt;/span&gt;]: &lt;span class=&quot;number&quot;&gt;65536&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//--or--&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;trouble writing output:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Too many field references: &lt;span class=&quot;number&quot;&gt;131000&lt;/span&gt;; max is &lt;span class=&quot;number&quot;&gt;65536&lt;/span&gt;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;You may &lt;span class=&quot;keyword&quot;&gt;try&lt;/span&gt; using --multi-dex option.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Problem&quot;&gt;&lt;a href=&quot;#Problem&quot; class=&quot;headerlink&quot; title=&quot;Problem&quot;&gt;&lt;/a&gt;Problem&lt;/h2&gt;&lt;p&gt;After configuring multidex in the module, some projects may encounter the loss of part of the the classes when using reflection to list all the classes in the apk.&lt;br&gt;The usual code may like this:&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//get the apk path&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;String path = context.getPackageManager().getApplicationInfo(context.getPackageName(), &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;).sourceDir;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//use DexFile the unzip the apk, find the *classes.dex* in the apk&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DexFile dexfile = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; DexFile(path);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//get all the classes in this dex&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Enumeration&amp;lt;String&amp;gt; dexEntries = dexfile.entries();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; (dexEntries.hasMoreElements()) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    classNames.add(dexEntries.nextElement());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="Android" scheme="http://xudshen.info/tags/Android/"/>
    
      <category term="Multidex" scheme="http://xudshen.info/tags/Multidex/"/>
    
      <category term="65K" scheme="http://xudshen.info/tags/65K/"/>
    
  </entry>
  
  <entry>
    <title>令人惊叹的电音</title>
    <link href="http://xudshen.info/2014/10/21/good-music-awsome/"/>
    <id>http://xudshen.info/2014/10/21/good-music-awsome/</id>
    <published>2014-10-21T10:50:28.000Z</published>
    <updated>2016-03-06T15:37:17.000Z</updated>
    
    <content type="html">&lt;blockquote&gt;&lt;p&gt;不是摇滚，而是电音。&lt;br&gt;不是躁杂，而是节奏。&lt;br&gt;生命和心脏一起律动，&lt;br&gt;思维完全沉浸入音乐中，&lt;br&gt;是未来，是科学，是电子，是光，是电，是宇宙的文明在歌唱。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;闹了好久的音乐荒，今天终于发现了新大陆。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;这次的主打是英法的电音，排名没有先后。&lt;/p&gt;

&lt;style&gt;
  .album {
    display: inline;
    float: left;
    position: relative;
  }

  .album img{
    -webkit-transition: all 0.5s ease; /* Safari and Chrome */
    -moz-transition: all 0.5s ease; /* Firefox */
    -ms-transition: all 0.5s ease; /* IE 9 */
    -o-transition: all 0.5s ease; /* Opera */
    transition: all 0.5s ease;
    float: left;
  }

  .album:hover{
    z-index:555555 !important;
  }
  .album:hover img {
    -webkit-transform:scale(1.1); /* Safari and Chrome */
    -moz-transform:scale(1.1); /* Firefox */
    -ms-transform:scale(1.1); /* IE 9 */
    -o-transform:scale(1.1); /* Opera */
    transform:scale(1.1);
  }
&lt;/style&gt;
&lt;div&gt;
  &lt;a class=&quot;album&quot; href=&quot;http://music.163.com/#/artist?id=95279&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;
    &lt;img src=&quot;Kraftwerk.jpeg&quot;&gt;
  &lt;/a&gt;
  &lt;a class=&quot;album&quot; href=&quot;http://music.163.com/#/artist?id=90513&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;
      &lt;img src=&quot;DaftPunk.jpeg&quot;&gt;
    &lt;/a&gt;
  &lt;a class=&quot;album&quot; href=&quot;http://music.163.com/#/artist?id=38865&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;
    &lt;img src=&quot;M83.jpeg&quot;&gt;
  &lt;/a&gt;
  &lt;a class=&quot;album&quot; href=&quot;http://music.163.com/#/artist?id=98547&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;
    &lt;img src=&quot;PetShopBoys.jpeg&quot;&gt;
  &lt;/a&gt;
  &lt;a class=&quot;album&quot; href=&quot;http://music.163.com/#/artist?id=98112&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;
    &lt;img src=&quot;Orbital.jpeg&quot;&gt;
  &lt;/a&gt;
  &lt;a class=&quot;album&quot; href=&quot;http://music.163.com/#/artist?id=104492&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;
    &lt;img src=&quot;Underworld.jpeg&quot;&gt;
  &lt;/a&gt;
  &lt;a class=&quot;album&quot; href=&quot;http://music.163.com/#/artist?id=35427&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;
    &lt;img src=&quot;Justice.jpeg&quot;&gt;
  &lt;/a&gt;
  &lt;a class=&quot;album&quot; href=&quot;http://music.163.com/#/artist?id=85501&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;
    &lt;img src=&quot;Air.jpeg&quot;&gt;
  &lt;/a&gt;
  &lt;a class=&quot;album&quot; href=&quot;http://music.163.com/#/artist?id=41144&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;
    &lt;img src=&quot;Phoenix.jpeg&quot;&gt;
  &lt;/a&gt;
  &lt;a class=&quot;album&quot; href=&quot;http://music.163.com/#/artist?id=98538&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;
    &lt;img src=&quot;PortisHead.jpeg&quot;&gt;
  &lt;/a&gt;
&lt;/div&gt;
&lt;div style=&quot;clear:both&quot;&gt;&lt;/div&gt;

</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;&lt;p&gt;不是摇滚，而是电音。&lt;br&gt;不是躁杂，而是节奏。&lt;br&gt;生命和心脏一起律动，&lt;br&gt;思维完全沉浸入音乐中，&lt;br&gt;是未来，是科学，是电子，是光，是电，是宇宙的文明在歌唱。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;闹了好久的音乐荒，今天终于发现了新大陆。&lt;/p&gt;
    
    </summary>
    
    
      <category term="日常" scheme="http://xudshen.info/tags/%E6%97%A5%E5%B8%B8/"/>
    
      <category term="音乐" scheme="http://xudshen.info/tags/%E9%9F%B3%E4%B9%90/"/>
    
  </entry>
  
  <entry>
    <title>Yosemite：安装和修复开发环境</title>
    <link href="http://xudshen.info/2014/10/18/fix-package-with-Yosemite-update/"/>
    <id>http://xudshen.info/2014/10/18/fix-package-with-Yosemite-update/</id>
    <published>2014-10-18T03:10:52.000Z</published>
    <updated>2014-10-18T04:53:00.000Z</updated>
    
    <content type="html">&lt;p&gt;OS X Yosemite昨天如期而至，更新自不待说。有了上次升级OS X Yosemite Beta失败的经验，这次在按下那个大大的&lt;code&gt;继续&lt;/code&gt;之前，先用Time Machine做了一个备份。&lt;/p&gt;
&lt;p&gt;等待的过程尤其漫长，论坛上看到很多人都卡在&lt;a href=&quot;http://www.v2ex.com/t/139538&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;大约剩余2分钟&lt;/a&gt;。我倒是没有出现这种情况，我只是卡在&lt;a href=&quot;http://www.v2ex.com/t/139538&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;大约剩余1分钟&lt;/a&gt;而已(._.)。在安装界面使用&lt;code&gt;CMD&lt;/code&gt;+&lt;code&gt;L&lt;/code&gt;可以看到系统在不断拷贝&lt;code&gt;texlive&lt;/code&gt;的文件，也算是蛮拼的了。&lt;/p&gt;
&lt;p&gt;大约一个半小时后，锵锵，全新的OS X长这样。 &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2014/10/18/fix-package-with-Yosemite-update/osx.jpg&quot; alt=&quot;OS X Yosemite&quot;&gt;&lt;/p&gt;
&lt;p&gt;然后就是修复我的开发环境，毕竟还要靠它赚钱吃饭呐。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;Xcode CLT&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;CLT每次升级系统都会出现问题，所以首先要&lt;code&gt;xcode-select --install&lt;/code&gt;来同意Xcode的一个啥啥啥协议。另外因为我装的是Xcode-Beta，所以还要下面的命令来指定我的Xcode路径。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sudo xcode-select -switch /Applications/Xcode-Beta.app/Contents/Developer/&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Java&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Java也是每次升级系统都会出现问题，就像这样&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;java.png&quot; alt=&quot;Java&quot;&gt;&lt;/p&gt;
&lt;p&gt;点击&lt;code&gt;更多信息&lt;/code&gt;会跳转到Apple的网站，把那里面的Java安装包装一下就好。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Homebrew&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Homebrew的话使用&lt;code&gt;brew doctor&lt;/code&gt;测一下就好，我倒是没出现什么问题。&lt;a href=&quot;http://weibo.com/p/1001603766056865935197&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这里&lt;/a&gt;倒是有个修复Homebrew的文章。&lt;/p&gt;
&lt;p&gt;然后就是&lt;code&gt;brew update&lt;/code&gt;、&lt;code&gt;brew upgrade&lt;/code&gt;、&lt;code&gt;brew cleanup&lt;/code&gt;，升级一下各种包。&lt;/p&gt;
&lt;p&gt;至此就是Yosemite的初体验，更多新的特性（Handoff, Continuity…）还在试用中，以后再写好了。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;OS X Yosemite昨天如期而至，更新自不待说。有了上次升级OS X Yosemite Beta失败的经验，这次在按下那个大大的&lt;code&gt;继续&lt;/code&gt;之前，先用Time Machine做了一个备份。&lt;/p&gt;
&lt;p&gt;等待的过程尤其漫长，论坛上看到很多人都卡在&lt;a href=&quot;http://www.v2ex.com/t/139538&quot;&gt;大约剩余2分钟&lt;/a&gt;。我倒是没有出现这种情况，我只是卡在&lt;a href=&quot;http://www.v2ex.com/t/139538&quot;&gt;大约剩余1分钟&lt;/a&gt;而已(._.)。在安装界面使用&lt;code&gt;CMD&lt;/code&gt;+&lt;code&gt;L&lt;/code&gt;可以看到系统在不断拷贝&lt;code&gt;texlive&lt;/code&gt;的文件，也算是蛮拼的了。&lt;/p&gt;
&lt;p&gt;大约一个半小时后，锵锵，全新的OS X长这样。 &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2014/10/18/fix-package-with-Yosemite-update/osx.jpg&quot; alt=&quot;OS X Yosemite&quot;&gt;&lt;/p&gt;
&lt;p&gt;然后就是修复我的开发环境，毕竟还要靠它赚钱吃饭呐。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Yosemite" scheme="http://xudshen.info/tags/Yosemite/"/>
    
      <category term="Homebrew" scheme="http://xudshen.info/tags/Homebrew/"/>
    
      <category term="Java" scheme="http://xudshen.info/tags/Java/"/>
    
      <category term="Xcode" scheme="http://xudshen.info/tags/Xcode/"/>
    
  </entry>
  
  <entry>
    <title>Bandwagon 被黑小记</title>
    <link href="http://xudshen.info/2014/10/15/securing-vps-with-iptables/"/>
    <id>http://xudshen.info/2014/10/15/securing-vps-with-iptables/</id>
    <published>2014-10-15T14:33:02.000Z</published>
    <updated>2014-10-16T07:10:21.000Z</updated>
    
    <content type="html">&lt;p&gt;最近使用Azure和Bandwagon搭建了一个APNP梯子，顺畅无比。可惜好景不长，昨天下午突然就不能用了，心想不会那么快没流量吧。结果登上KiviVM一看，我的VPS居然被Suspend了，原因是Spam Email，顿时感到不妙，花了个擦，我的小梯子居然成了肉鸡？&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;使用&lt;code&gt;netstat -nap&lt;/code&gt;一看，满满一屏的&lt;code&gt;postfix&lt;/code&gt;在向25端口发包，也是醉了。当时也是慌了手脚，第一反应居然是改&lt;code&gt;iptables&lt;/code&gt;，又是查手册，又是改代码。本来Bandwagon的线路延迟就大，在改配置的过程中又被系统Suspend了一次。心塞。&lt;/p&gt;
&lt;p&gt;没办法，要是再被Suspend两次，今年就不要指望再用这个VPS了。也幸好服务器上的东西不多，就只有一个Shadowsocks，于是决定Install A New OS。用KiviVM重装了一个Ubuntu，心想这样总该没问题了吧。万万没想到不到五分钟，系统通知说我又被Suspend了。难道有人一直攻击我这个IP？这样再重装都没有用啊。于是开始切Data Center，重新分配IP，重装OS。这次学乖了，登上去之后就检查&lt;code&gt;netstat -nap&lt;/code&gt;。令人惊讶的是，居然还有一堆的&lt;code&gt;postfix&lt;/code&gt;，这可是新的OS啊。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;这里严重怀疑Bandwagon在背后搞鬼，或者Bandwagon后台被黑，全新的OS居然会自开端口发垃圾邮件。&lt;br&gt;有在V2EX上问过这样的事情，有人提出了相同的&lt;a href=&quot;http://www.v2ex.com/t/138920#reply9&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;怀疑&lt;/a&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;顿时火大，立马把&lt;code&gt;postfix&lt;/code&gt;给卸掉了，反正平常也不怎么用。&lt;/p&gt;
&lt;p&gt;再次把&lt;code&gt;/etc/ssh/sshd_config&lt;/code&gt;里面&lt;code&gt;PasswordAuthentication&lt;/code&gt; &lt;code&gt;PermitRootLogin&lt;/code&gt;置为&lt;code&gt;no&lt;/code&gt;，安装&lt;code&gt;fail2ban&lt;/code&gt;，三次失败就被ban一年，哼（￣ェ￣）；设置&lt;code&gt;iptables&lt;/code&gt;，只允许&lt;code&gt;80&lt;/code&gt; &lt;code&gt;443&lt;/code&gt; &lt;code&gt;53&lt;/code&gt;端口的通信，这下总不能乱发邮件了吧。&lt;/p&gt;
&lt;p&gt;总结一下，为了VPS的安全，&lt;code&gt;iptables&lt;/code&gt;还是要仔细设置的，另外需要及时更改&lt;code&gt;ssh&lt;/code&gt;的端口，同时仅允许证书登录。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;最最重要的是，谨防服务商。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;结尾附上我的&lt;code&gt;iptables&lt;/code&gt;设置。&lt;/p&gt;
&lt;script src=&quot;//gist.github.com/debe533c89c21d2a1d87.js?file=iptables.conf&quot;&gt;&lt;/script&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;最近使用Azure和Bandwagon搭建了一个APNP梯子，顺畅无比。可惜好景不长，昨天下午突然就不能用了，心想不会那么快没流量吧。结果登上KiviVM一看，我的VPS居然被Suspend了，原因是Spam Email，顿时感到不妙，花了个擦，我的小梯子居然成了肉鸡？&lt;/p&gt;
    
    </summary>
    
    
      <category term="VPS" scheme="http://xudshen.info/tags/VPS/"/>
    
      <category term="安全" scheme="http://xudshen.info/tags/%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>视差滚动：初探</title>
    <link href="http://xudshen.info/2014/08/13/parallax-scrolling-start/"/>
    <id>http://xudshen.info/2014/08/13/parallax-scrolling-start/</id>
    <published>2014-08-13T10:21:00.000Z</published>
    <updated>2014-10-20T08:45:05.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Parallax_scrolling#Parallax_scrolling_in_Web_design&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;视差滚动&lt;/a&gt;已经火了很久了，但一直没有空去尝试。&lt;/p&gt;
&lt;p&gt;下面是利用&lt;code&gt;$(window).scroll&lt;/code&gt;来控制&lt;code&gt;div&lt;/code&gt;位置的尝试，重点在于各种高度的计算。&lt;/p&gt;
&lt;iframe scrolling=&quot;no&quot; width=&quot;100%&quot; height=&quot;300&quot; src=&quot;http://jsfiddle.net/n3e50sze/embedded/result,js,html,css/light&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Parallax_scrolling#Parallax_scrolling_in_Web_design&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;视差滚动&lt;/a&gt;已经火了很久了
    
    </summary>
    
    
      <category term="视差滚动" scheme="http://xudshen.info/tags/%E8%A7%86%E5%B7%AE%E6%BB%9A%E5%8A%A8/"/>
    
      <category term="HTML" scheme="http://xudshen.info/tags/HTML/"/>
    
      <category term="JS" scheme="http://xudshen.info/tags/JS/"/>
    
  </entry>
  
  <entry>
    <title>RxMqtt：Reactive Extensions for the Mqtt</title>
    <link href="http://xudshen.info/2014/07/21/rxmqtt-rxjava-with-mqtt/"/>
    <id>http://xudshen.info/2014/07/21/rxmqtt-rxjava-with-mqtt/</id>
    <published>2014-07-21T06:30:48.000Z</published>
    <updated>2014-10-20T06:36:34.000Z</updated>
    
    <content type="html"></content>
    
    <summary type="html">
    
    </summary>
    
    
      <category term="RxMqtt" scheme="http://xudshen.info/tags/RxMqtt/"/>
    
      <category term="RxJava" scheme="http://xudshen.info/tags/RxJava/"/>
    
      <category term="MQTT" scheme="http://xudshen.info/tags/MQTT/"/>
    
  </entry>
  
  <entry>
    <title>Gson在Spring MVC中的使用</title>
    <link href="http://xudshen.info/2014/07/14/gson-with-spring-mvc/"/>
    <id>http://xudshen.info/2014/07/14/gson-with-spring-mvc/</id>
    <published>2014-07-14T11:14:13.000Z</published>
    <updated>2014-10-20T09:18:48.000Z</updated>
    
    <content type="html">&lt;p&gt;最近在用Spring MVC搭建一套Restful API，整个过程的最后一步就是数据序列化。Spring MVC默认使用&lt;a href=&quot;http://jackson.codehaus.org&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Jackson&lt;/a&gt;，但在使用过程中并不如想象中的顺手。因而尝试转向&lt;a href=&quot;https://code.google.com/p/google-gson/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Gson&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;Gson是Google出品的用来进行Java Object和JSON转换的类库。有人曾对Gson和Jackson的性能做过&lt;a href=&quot;http://tuhrig.de/jaxb-vs-gson-and-jackson/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;比较&lt;/a&gt;，Gson在读取和写入方面的速度都要逊于Jackson。不过现前并不需要在性能上作过多要求，容易上手和提高开发效率才是这个项目的重中之重。&lt;/p&gt;
&lt;h1 id=&quot;基本&quot;&gt;&lt;a href=&quot;#基本&quot; class=&quot;headerlink&quot; title=&quot;基本&quot;&gt;&lt;/a&gt;基本&lt;/h1&gt;&lt;p&gt;使用Gson来反序列化JSON十分简单，如下：&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;User&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;User&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; String name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; String password;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String name, String password)&lt;/span&gt;&lt;/span&gt;&amp;#123;...&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;Gson反序列化User&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Gson gson = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Gson();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gson.toJson(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; User(&lt;span class=&quot;string&quot;&gt;&quot;hello&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;world&quot;&lt;/span&gt;), User.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Result:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// &amp;#123;&quot;name&quot;: &quot;hello&quot;, &quot;password&quot;: &quot;world&quot;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;但Gson的优点不仅仅在于这点，而是在自定义序列化方面。&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;进阶&quot;&gt;&lt;a href=&quot;#进阶&quot; class=&quot;headerlink&quot; title=&quot;进阶&quot;&gt;&lt;/a&gt;进阶&lt;/h1&gt;&lt;h2 id=&quot;使用-Expose注解忽略不想序列化的（敏感）字段&quot;&gt;&lt;a href=&quot;#使用-Expose注解忽略不想序列化的（敏感）字段&quot; class=&quot;headerlink&quot; title=&quot;使用@Expose注解忽略不想序列化的（敏感）字段&quot;&gt;&lt;/a&gt;使用@Expose注解忽略不想序列化的（敏感）字段&lt;/h2&gt;&lt;p&gt;很明显，在返回给用户的时候是不应该包含&lt;code&gt;password&lt;/code&gt;这种字段的，在反序列化的过程中应该把它忽略掉。这里就可以使用Gson自带的注解&lt;code&gt;@Expose&lt;/code&gt;来指定哪些字段需要被反序列化。&lt;strong&gt;注意：字段加了&lt;code&gt;@Expose&lt;/code&gt;表明该字段会被反序列化，而不是被忽略。&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;User带@Expose注解&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;User&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;meta&quot;&gt;@Expose&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; String name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; String password;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String name, String password)&lt;/span&gt;&lt;/span&gt;&amp;#123;...&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;Gson反序列化User&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Gson gson = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; GsonBuilder().excludeFieldsWithoutExposeAnnotation().create();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gson.toJson(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; User(&lt;span class=&quot;string&quot;&gt;&quot;hello&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;world&quot;&lt;/span&gt;), User.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Result:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// &amp;#123;&quot;name&quot;: &quot;hello&quot;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;利用字段null来简化API的输出&quot;&gt;&lt;a href=&quot;#利用字段null来简化API的输出&quot; class=&quot;headerlink&quot; title=&quot;利用字段null来简化API的输出&quot;&gt;&lt;/a&gt;利用字段null来简化API的输出&lt;/h2&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;CommonResponse&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;CommonResponse&lt;/span&gt;&amp;lt;&lt;span class=&quot;title&quot;&gt;T&lt;/span&gt;&amp;gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;meta&quot;&gt;@Expose&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; Int status; &lt;span class=&quot;comment&quot;&gt;//API状态码，与HttpStatus状态码类似，200为Success，10000以上则对应服务的各种错误&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;meta&quot;&gt;@Expose&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; T response; &lt;span class=&quot;comment&quot;&gt;// status == 200 时的具体返回值，status != 200 时不显示&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;meta&quot;&gt;@Expose&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; String message; &lt;span class=&quot;comment&quot;&gt;//status != 200 时的详细消息输出，status == 200 时不显示&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;CommonResponse&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(T response)&lt;/span&gt;&lt;/span&gt;&amp;#123;...&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;CommonResponse&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(T response, String message)&lt;/span&gt;&lt;/span&gt;&amp;#123;...&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Json默认对于null的字段不输出，利用这种方式可以简化API的输出，压缩空间；同时利用上面&lt;code&gt;CommonResponse&lt;/code&gt;的设计，&lt;br&gt;在输出正确时&lt;/p&gt;
&lt;figure class=&quot;highlight json&quot;&gt;&lt;figcaption&gt;&lt;span&gt;CommonResponse.status = 200&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&quot;status&quot;&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;200&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&quot;response&quot;&lt;/span&gt;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;hello&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;输出错误时&lt;br&gt;&lt;figure class=&quot;highlight json&quot;&gt;&lt;figcaption&gt;&lt;span&gt;CommonResponse.status = 10001&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&quot;status&quot;&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;10001&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&quot;message&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;no use found&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;与Spring-MVC整合&quot;&gt;&lt;a href=&quot;#与Spring-MVC整合&quot; class=&quot;headerlink&quot; title=&quot;与Spring MVC整合&quot;&gt;&lt;/a&gt;与Spring MVC整合&lt;/h2&gt;&lt;figure class=&quot;highlight xml&quot;&gt;&lt;figcaption&gt;&lt;span&gt;web.xml&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;mvc:annotation-driven&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;mvc:message-converters&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--use utf-8--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;bean&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;constructor-arg&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;name&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;writeAcceptCharset&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;value&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;false&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;bean&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;bean&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;class&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;info.xudshen.basic.util.gson.GsonHttpMessageConverter&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;constructor-arg&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--ignore the class in this list-&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;lt;list&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;lt;value&amp;gt;com.wordnik.swagger.model.ResourceListing&amp;lt;/value&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;lt;value&amp;gt;com.wordnik.swagger.model.ApiListing&amp;lt;/value&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;lt;/list&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;lt;/constructor-arg&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;/bean&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;/mvc:message-converters&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/mvc:annotation-driven&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;GsonHttpMessageConverter的代码在&lt;a href=&quot;https://gist.github.com/xudshen/c7ee24ee6e4495b86834&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Gist&lt;/a&gt;上&lt;/p&gt;
&lt;h2 id=&quot;更多Gson配置&quot;&gt;&lt;a href=&quot;#更多Gson配置&quot; class=&quot;headerlink&quot; title=&quot;更多Gson配置&quot;&gt;&lt;/a&gt;更多Gson配置&lt;/h2&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;更多Gson配置&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; Gson gson = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; GsonBuilder().enableComplexMapKeySerialization()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                .setFieldNamingPolicy(FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                .excludeFieldsWithoutExposeAnnotation()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                .setDateFormat(&lt;span class=&quot;string&quot;&gt;&quot;yyyy-MM-dd HH:mm:ss.S Z&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                .create();&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;p&gt;最近在用Spring MVC搭建一套Restful API，整个过程的最后一步就是数据序列化。Spring MVC默认使用&lt;a href=&quot;http://jackson.codehaus.org&quot;&gt;Jackson&lt;/a&gt;，但在使用过程中并不如想象中的顺手。因而尝试转向&lt;a href=&quot;https://code.google.com/p/google-gson/&quot;&gt;Gson&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;Gson是Google出品的用来进行Java Object和JSON转换的类库。有人曾对Gson和Jackson的性能做过&lt;a href=&quot;http://tuhrig.de/jaxb-vs-gson-and-jackson/&quot;&gt;比较&lt;/a&gt;，Gson在读取和写入方面的速度都要逊于Jackson。不过现前并不需要在性能上作过多要求，容易上手和提高开发效率才是这个项目的重中之重。&lt;/p&gt;
&lt;h1 id=&quot;基本&quot;&gt;&lt;a href=&quot;#基本&quot; class=&quot;headerlink&quot; title=&quot;基本&quot;&gt;&lt;/a&gt;基本&lt;/h1&gt;&lt;p&gt;使用Gson来反序列化JSON十分简单，如下：&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;User&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;User&lt;/span&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; String name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; String password;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String name, String password)&lt;/span&gt;&lt;/span&gt;&amp;#123;...&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;Gson反序列化User&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Gson gson = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Gson();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gson.toJson(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; User(&lt;span class=&quot;string&quot;&gt;&quot;hello&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;world&quot;&lt;/span&gt;), User.class);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Result:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// &amp;#123;&quot;name&quot;: &quot;hello&quot;, &quot;password&quot;: &quot;world&quot;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;但Gson的优点不仅仅在于这点，而是在自定义序列化方面。&lt;br&gt;
    
    </summary>
    
    
      <category term="Gson" scheme="http://xudshen.info/tags/Gson/"/>
    
      <category term="Spring MVC" scheme="http://xudshen.info/tags/Spring-MVC/"/>
    
  </entry>
  
  <entry>
    <title>[知乎]答：为什么现在的 GUI 设计仍跳不出 button、list、icon，没有这些元素的 GUI 会是什么样子？</title>
    <link href="http://xudshen.info/2013/06/08/why-are-button-list-the-basic-ui-control/"/>
    <id>http://xudshen.info/2013/06/08/why-are-button-list-the-basic-ui-control/</id>
    <published>2013-06-07T16:48:00.000Z</published>
    <updated>2014-10-16T07:12:16.000Z</updated>
    
    <content type="html">&lt;p&gt;此为知乎上的一个提问，&lt;a href=&quot;http://www.zhihu.com/question/20269253&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;原文在这里&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;button,list等作为一些基础控件，从较高的层面讲，他们阐释了&lt;strong&gt;基本的交互语言，从而实现界面交互&lt;/strong&gt;；就像在研究素描时，大多也就可以由三角形、圆形、矩形等构成（图一）。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2013/06/08/why-are-button-list-the-basic-ui-control/sketch.jpg&quot; alt=&quot;图一：素描&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;举个例子吧，图二是一个颜色拾取板，简单分析一下，就会发现其实这一圈就是个list，只不过和一般直直的list不同，每个item进行了固定角度的旋转。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;circlelist.jpg&quot; alt=&quot;图二&quot;&gt;&lt;/p&gt;
&lt;p&gt;再如1l所说的日期选择控件（图三），仍然逃不过所谓的button，list的命运。&lt;/p&gt;
&lt;p&gt;我们可以叫他新控件，也可以叫做旧控件的新组合（并算不上新的交互）。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;datepicker.jpg&quot; alt=&quot;图三&quot;&gt;&lt;/p&gt;
&lt;p&gt;因此，在控件设计时往往有一项准则：&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;如果可以用以往的基本控件来组合，那么就不要重新创造一个新控件。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;个人看来，我们现在所说的新控件，往往是添加或重组了&lt;strong&gt;交互方式/顺序&lt;/strong&gt;，并未能跳出基本控件的框框。（欢迎lx举出例子来反驳）&lt;/p&gt;
&lt;p&gt;至于button，list这些基本控件是如何设计出来的，只能佩服前人的创造，简洁而又强大。&lt;/p&gt;
&lt;p&gt;这样应该能够回答lz的“为什么现在的 GUI 设计仍跳不出 button,list的框架”这个问题。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Add：&lt;br&gt;看了一些回答，有的从与日常生活的映射角度来分析。&lt;/p&gt;
&lt;p&gt;突发奇想，要是从集合论的角度，&lt;/p&gt;
&lt;p&gt;所有物体的集合对应list，&lt;/p&gt;
&lt;p&gt;而对物体的操作对应button，&lt;/p&gt;
&lt;p&gt;如此似乎能解释这些基础控件的起源=。=&lt;/p&gt;
&lt;p&gt;想法不靠谱，额嗬嗬嗬嗬嗬嗬嗬嗬，，，&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;此为知乎上的一个提问，&lt;a href=&quot;http://www.zhihu.com/question/20269253&quot;&gt;原文在这里&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;button,list等作为一些基础控件，从较高的层面讲，他们阐释了&lt;strong&gt;基本的交互语言，从而实现界面交互&lt;/strong&gt;；就像在研究素描时，大多也就可以由三角形、圆形、矩形等构成（图一）。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2013/06/08/why-are-button-list-the-basic-ui-control/sketch.jpg&quot; alt=&quot;图一：素描&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="设计" scheme="http://xudshen.info/tags/%E8%AE%BE%E8%AE%A1/"/>
    
      <category term="日常" scheme="http://xudshen.info/tags/%E6%97%A5%E5%B8%B8/"/>
    
  </entry>
  
  <entry>
    <title>软工_API定义</title>
    <link href="http://xudshen.info/2013/04/19/se-api-define/"/>
    <id>http://xudshen.info/2013/04/19/se-api-define/</id>
    <published>2013-04-19T02:12:00.000Z</published>
    <updated>2016-03-07T08:01:29.000Z</updated>
    
    <content type="html">&lt;p&gt;软件工程课程项目API&lt;/p&gt;
&lt;p&gt;为了进行更好的分工合作，将API罗列如下…&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;教程&quot;&gt;&lt;a href=&quot;#教程&quot; class=&quot;headerlink&quot; title=&quot;教程&quot;&gt;&lt;/a&gt;教程&lt;/h1&gt;&lt;p&gt;由于项目将使用tomcat+struts2+mysql搭建，请认真阅读sample中的表格提交功能以及数据加载功能。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://6carol6.github.io/blog/2013/04/20/school-management-system-outline/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Sample的一个简单的运行描述&lt;/a&gt; 感谢小组长&lt;a href=&quot;http://6carol6.github.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;@6carol6&lt;/a&gt;童鞋。&lt;/p&gt;
&lt;h1 id=&quot;登陆-pages-Login-jsp&quot;&gt;&lt;a href=&quot;#登陆-pages-Login-jsp&quot; class=&quot;headerlink&quot; title=&quot;登陆(/pages/Login.jsp)&quot;&gt;&lt;/a&gt;登陆(/pages/Login.jsp)&lt;/h1&gt;&lt;p&gt;&lt;code&gt;action name:&lt;/code&gt;  Login&lt;/p&gt;
&lt;p&gt;&lt;code&gt;servlet name:&lt;/code&gt; SampleProject.Login&lt;/p&gt;
&lt;p&gt;&lt;code&gt;page value:&lt;/code&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:left&quot;&gt;name&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;type&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;field&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;more     &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;username&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;用户名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;password&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;密码&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;identity&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;{0,1,2}&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;用户身份：学生、教师、管理员&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;em&gt;请注意这里page value的使用：是指页面将需要对应的action类中实现相应的getter和setter函数&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;例如：&lt;/em&gt;&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;figcaption&gt;&lt;span&gt;表单提交&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//表单提交将默认执行action中的execute函数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//在执行该函数之前，所有表单中的项 将 调用 对应的setter函数进行赋值&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Login.jsp&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;s:textfield key=&lt;span class=&quot;string&quot;&gt;&quot;username&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Login.java&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; String username;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;getUsername&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; username;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;setUsername&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(String username)&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//username = &quot;admin&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.username = username; &lt;span class=&quot;comment&quot;&gt;//this.username = &quot;admin&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//此时调用&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; String &lt;span class=&quot;title&quot;&gt;execute&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;throws&lt;/span&gt; Exception &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	getUsername();&lt;span class=&quot;comment&quot;&gt;//得到&quot;admin&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;action method:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;execute =&amp;gt; 验证用户身份，失败返回INPUT&lt;/p&gt;
&lt;p&gt;&lt;em&gt;return: &lt;/em&gt;&lt;/p&gt;
&lt;p&gt;“student” =&amp;gt; student/StuInfo.action&lt;/p&gt;
&lt;p&gt;“teacher” =&amp;gt; teacher/TeacherInfo.action&lt;/p&gt;
&lt;p&gt;“admin” =&amp;gt; admin/AdminInfo.action&lt;/p&gt;
&lt;p&gt;ERROR/INPUT =&amp;gt; /pages/Login.jsp(with validation error)&lt;/p&gt;
&lt;p&gt;&lt;code&gt;on the back:&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;验证用户名和密码&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;more TODO:&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;用户Cookie&lt;/li&gt;
&lt;li&gt;用户密码RSA加密&lt;/li&gt;
&lt;li&gt;验证码&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h1 id=&quot;学生&quot;&gt;&lt;a href=&quot;#学生&quot; class=&quot;headerlink&quot; title=&quot;学生&quot;&gt;&lt;/a&gt;学生&lt;/h1&gt;&lt;h2 id=&quot;class-StuClass-pages-student-info-jsp&quot;&gt;&lt;a href=&quot;#class-StuClass-pages-student-info-jsp&quot; class=&quot;headerlink&quot; title=&quot;class StuClass(/pages/student/info.jsp)&quot;&gt;&lt;/a&gt;class StuClass(/pages/student/info.jsp)&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:left&quot;&gt;name&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;type&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;field&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;more&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;no&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;学号&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;name&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;姓名 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;id&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;身份证&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;birth&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;Date&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;出生日期&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;dept&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;院系&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;major&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;专业&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;domain&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;研究方向&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;enrollyear&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;Date&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;入学年份&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;grade&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;所属年级&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;schoolyear&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;学制&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;state&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;学籍状态&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;degree&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;学位&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;mobile&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;手机号&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;email&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;邮箱&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;addr&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;地址&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;postcode&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;邮编&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;fname&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;父姓名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;fwork&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;父工作单位&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;mname&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;母姓名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;mname&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;母工作单位&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;homeNumber&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;家庭电话&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;em&gt;这里列出的是指对应的StuClass实例里面需要实现的getter和setter函数&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;例如：&lt;/em&gt;&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//页面需要name的值，&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;s:property value=&lt;span class=&quot;string&quot;&gt;&quot;detail.name&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//而在后台action的类里面，有&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; StuClass detail;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; StuClass &lt;span class=&quot;title&quot;&gt;getDetail&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.detail;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;setDetail&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(StuClass detail)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.detail = detail;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//那么StuClass这个类中需要有name的getter，即：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; StuClass &lt;span class=&quot;title&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; xxxxxx;&lt;span class=&quot;comment&quot;&gt;//随便返回什么，但它的值必须是我要的name&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;br&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;个人信息页面-pages-student-info-jsp&quot;&gt;&lt;a href=&quot;#个人信息页面-pages-student-info-jsp&quot; class=&quot;headerlink&quot; title=&quot;个人信息页面(/pages/student/info.jsp)&quot;&gt;&lt;/a&gt;个人信息页面(/pages/student/info.jsp)&lt;/h2&gt;&lt;p&gt;&lt;code&gt;action name:&lt;/code&gt;  StuInfo&lt;/p&gt;
&lt;p&gt;&lt;code&gt;servlet name:&lt;/code&gt; SampleProject.Student.Info&lt;/p&gt;
&lt;p&gt;&lt;code&gt;page value:&lt;/code&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:left&quot;&gt;name&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;type&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;field&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;more&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;username&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;用户名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;identity&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;{0,1,2}&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;用户身份：学生、教师、管理员&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;code&gt;action method:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;execute =&amp;gt; 利用session获得用户名和用户身份&lt;/p&gt;
&lt;p&gt;&lt;em&gt;return:&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;SUCCESS =&amp;gt; /pages/student/info.jsp&lt;/p&gt;
&lt;p&gt;ERROR =&amp;gt; Login.action&lt;/p&gt;
&lt;p&gt;&lt;code&gt;on the back:&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;利用session获得用户名和用户身份&lt;/li&gt;
&lt;li&gt;验证用户名权限，错误则返回Login.action&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;more TODO:&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;全局通知栏&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&quot;毕业信息核对-pages-student-infoCheck-jsp&quot;&gt;&lt;a href=&quot;#毕业信息核对-pages-student-infoCheck-jsp&quot; class=&quot;headerlink&quot; title=&quot;毕业信息核对(/pages/student/infoCheck.jsp)&quot;&gt;&lt;/a&gt;毕业信息核对(/pages/student/infoCheck.jsp)&lt;/h3&gt;&lt;p&gt;&lt;code&gt;action name:&lt;/code&gt;  StuInfoCheck&lt;/p&gt;
&lt;p&gt;&lt;code&gt;servlet name:&lt;/code&gt; SampleProject.Student.InfoCheck&lt;/p&gt;
&lt;p&gt;&lt;code&gt;page value:(????????)&lt;/code&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:left&quot;&gt;name&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;type&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;field&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;more&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;detail&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;a href=&quot;#2-0&quot;&gt;StuClass&lt;/a&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;用户信息&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;detail.no&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;学号&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;detail.name&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;姓名 &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;detail.id&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;身份证&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;detail.dept&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;院系&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;detail.major&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;专业&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;detail.domain&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;研究方向&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;detail.enrollyear&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;Date&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;入学年份&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;detail.grade&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;所属年级&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;detail.schoolyear&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;学制&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;detail.degree&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;学位&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;a href=&quot;#2-0&quot;&gt;使用说明&lt;/a&gt;见学生类&lt;/p&gt;
&lt;p&gt;&lt;code&gt;action method:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;execute =&amp;gt; 执行基本信息的读取&lt;/p&gt;
&lt;p&gt;&lt;em&gt;return:&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;SUCCESS =&amp;gt; /pages/student/infoCheck.jsp&lt;/p&gt;
&lt;p&gt;ERROR =&amp;gt; Login.action&lt;/p&gt;
&lt;p&gt;&lt;code&gt;on the back:&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;利用session获得用户名和用户身份&lt;/li&gt;
&lt;li&gt;验证用户名权限，错误则返回Login.action&lt;/li&gt;
&lt;li&gt;读取学生毕业信息，填充相应字段&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;more TODO:&lt;/code&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;基本信息修改-pages-student-infoModify-jsp&quot;&gt;&lt;a href=&quot;#基本信息修改-pages-student-infoModify-jsp&quot; class=&quot;headerlink&quot; title=&quot;基本信息修改(/pages/student/infoModify.jsp)&quot;&gt;&lt;/a&gt;基本信息修改(/pages/student/infoModify.jsp)&lt;/h3&gt;&lt;p&gt;&lt;code&gt;action name:&lt;/code&gt;  StuInfoModify&lt;/p&gt;
&lt;p&gt;&lt;code&gt;servlet name:&lt;/code&gt; SampleProject.Student.InfoModify&lt;/p&gt;
&lt;p&gt;&lt;code&gt;page value:&lt;/code&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:left&quot;&gt;name&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;type&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;field&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;more&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;mobile&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;手机号&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;email&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;邮箱&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;addr&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;地址&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;postcode&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;邮编&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;fname&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;父姓名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;fwork&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;父工作单位&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;mname&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;母姓名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;mname&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;母工作单位&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:left&quot;&gt;homeNumber&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;String&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;家庭电话&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;em&gt;注意&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;action method:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;execute =&amp;gt; 执行基本信息的读取&lt;/p&gt;
&lt;p&gt;&lt;em&gt;return&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;SUCCESS =&amp;gt; /pages/student/infoModify.jsp&lt;/p&gt;
&lt;p&gt;ERROR =&amp;gt; Login.action&lt;/p&gt;
&lt;p&gt;&lt;code&gt;action method:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;tryModify =&amp;gt; 尝试执行基本信息的修改&lt;/p&gt;
&lt;p&gt;成功：addActionMessage()&lt;/p&gt;
&lt;p&gt;失败：addActionError()&lt;/p&gt;
&lt;p&gt;&lt;em&gt;return&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;SUCCESS =&amp;gt; /pages/student/infoModify.jsp&lt;/p&gt;
&lt;p&gt;“fail” =&amp;gt; /pages/student/infoModify.jsp&lt;/p&gt;
&lt;p&gt;&lt;code&gt;on the back:&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;利用session获得用户名和用户身份&lt;/li&gt;
&lt;li&gt;验证用户名权限，错误则返回Login.action&lt;/li&gt;
&lt;li&gt;在初次载入页面时，将 执行execute函数&lt;/li&gt;
&lt;li&gt;在使用页面上的button提交修改时，将 执行 该action的 tryModify函数&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;more TODO:&lt;/code&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;软件工程课程项目API&lt;/p&gt;
&lt;p&gt;为了进行更好的分工合作，将API罗列如下…&lt;/p&gt;
    
    </summary>
    
    
      <category term="软工" scheme="http://xudshen.info/tags/%E8%BD%AF%E5%B7%A5/"/>
    
  </entry>
  
  <entry>
    <title>优酷手机党福利</title>
    <link href="http://xudshen.info/2013/04/10/generate-html5-video/"/>
    <id>http://xudshen.info/2013/04/10/generate-html5-video/</id>
    <published>2013-04-10T08:27:00.000Z</published>
    <updated>2016-03-06T15:30:07.000Z</updated>
    
    <content type="html">&lt;p&gt;用lumia在优酷上看视频有个问题：不支持flash，&lt;/p&gt;
&lt;p&gt;虽说有html5了，也有m.youku.com，但还是好多视频看不了，&lt;/p&gt;
&lt;p&gt;所以搞了个小蛋疼代码。&lt;/p&gt;
&lt;h2 id=&quot;&quot;&gt;&lt;a href=&quot;#&quot; class=&quot;headerlink&quot; title=&quot;&quot;&gt;&lt;/a&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;###输入&lt;br&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
	function doAdd()
	{
		var element = document.getElementById(&quot;showFrame&quot;);
		element.innerHTML = document.getElementById(&quot;srcUrl&quot;).value;
	};
&lt;/script&gt;
&lt;div&gt;
	&lt;input id=&quot;srcUrl&quot; type=&quot;text&quot; value=&quot;&quot; autocomplete=&quot;off&quot;&gt;
	&lt;button onclick=&quot;doAdd()&quot;&gt;Generate&lt;/button&gt;
&lt;/div&gt;
&lt;div id=&quot;showFrame&quot;&gt;
&lt;/div&gt;

&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;###使用方法&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;点击优酷页面中的分享，如下图&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;youku1.jpg&quot; alt=&quot;点击优酷页面中的分享&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;选择通用代码，拷贝到上面的输入框中，如下图&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;youku2.jpg&quot; alt=&quot;选择通用代码&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;点击Generate即可观看&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;用lumia在优酷上看视频有个问题：不支持flash，&lt;/p&gt;
&lt;p&gt;虽说有html5了，也有m.youku.com，但还是好多视频看不了，&lt;/p&gt;
&lt;p&gt;所以搞了个小蛋疼代码。&lt;/p&gt;
&lt;h2 id=&quot;&quot;&gt;&lt;a href=&quot;#&quot; class=&quot;headerlink&quot; title=&quot;&quot;&gt;&lt;/a&gt;
    
    </summary>
    
    
      <category term="日常" scheme="http://xudshen.info/tags/%E6%97%A5%E5%B8%B8/"/>
    
  </entry>
  
  <entry>
    <title>ListViewBase中的CanReorderItems属性</title>
    <link href="http://xudshen.info/2013/04/10/canreorderitems-property-in-listviewbase/"/>
    <id>http://xudshen.info/2013/04/10/canreorderitems-property-in-listviewbase/</id>
    <published>2013-04-10T05:44:00.000Z</published>
    <updated>2014-10-16T07:12:51.000Z</updated>
    
    <content type="html">&lt;p&gt;最近使用GridView时，想实现Item之间的自由拖动排列，一开始自己写了个Panel，后来才发现自带的API中已经有了这么一个属性CanReorderItems，然而在设置为true之后，不没有能使Item自由排列，google了一下才找到原因。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;下面是Flores Eken的解释&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;But, there are some things you need to know to get it to work. First of all the AllowDrop property also needs to be set to true.&lt;/p&gt;
&lt;p&gt;And the grid or list needs to be binded to a ObservableVector (no ObservableCollection is not good enough).&lt;br&gt;But in the developer preview only an interface exists for this collection, so you have to make your own implementation or borrow one.. like this one.&lt;/p&gt;
&lt;p&gt;One caveat remains.. the ObservableVector needs to be initialized with object as T, strong types will not work in the developer preview of windows 8. Like so:&lt;/p&gt;
&lt;footer&gt;&lt;strong&gt;Flores Eken&lt;/strong&gt;&lt;cite&gt;&lt;a href=&quot;http://www.itq.nl/blogs/post/CanReorderItems3dtrue.aspx&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CanReorderItems=true&lt;/a&gt;&lt;/cite&gt;&lt;/footer&gt;&lt;/blockquote&gt;
&lt;p&gt;简单易懂，就不翻译了=。=&lt;/p&gt;
&lt;p&gt;但使用过程中有以下注意点(from &lt;strong&gt;MSDN&lt;/strong&gt; &lt;a href=&quot;http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.ui.xaml.controls.listviewbase.canreorderitems.aspx&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;em&gt;ListViewBase.CanReorderItems Property&lt;/em&gt;&lt;/a&gt;):&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;如果启用了项目选择，并且将 &lt;a href=&quot;http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.ui.xaml.controls.listviewbase.isswipeenabled.aspx&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;IsSwipeEnabled&lt;/a&gt;&lt;br&gt; 设置为 false，则用户可以通过鼠标右击来取消选择项目，但是不能通过重击手势，使用触控来取消选择项目。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;如果将 &lt;a href=&quot;http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.ui.xaml.controls.listviewbase.candragitems.aspx&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CanDragItems&lt;/a&gt;&lt;br&gt; 设置为 true，并将 &lt;a href=&quot;http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.ui.xaml.controls.listviewbase.isswipeenabled.aspx&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;IsSwipeEnabled&lt;/a&gt;&lt;br&gt; 设置为 false，则用户可以用鼠标拖动项目，但不能通过触摸方式。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;如果将 &lt;a href=&quot;http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.ui.xaml.controls.listviewbase.canreorderitems.aspx&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CanReorderItems&lt;/a&gt;&lt;br&gt; 设置为 true，并将 &lt;a href=&quot;http://msdn.microsoft.com/zh-cn/library/windows/apps/windows.ui.xaml.controls.listviewbase.isswipeenabled.aspx&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;IsSwipeEnabled&lt;/a&gt;&lt;br&gt; 设置为 false，则用户可以用鼠标对项目重新排序，但不能通过触摸方式。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;最近使用GridView时，想实现Item之间的自由拖动排列，一开始自己写了个Panel，后来才发现自带的API中已经有了这么一个属性CanReorderItems，然而在设置为true之后，不没有能使Item自由排列，google了一下才找到原因。&lt;/p&gt;
    
    </summary>
    
    
      <category term="WinRT" scheme="http://xudshen.info/tags/WinRT/"/>
    
  </entry>
  
  <entry>
    <title>乔迁之喜</title>
    <link href="http://xudshen.info/2013/04/09/cong/"/>
    <id>http://xudshen.info/2013/04/09/cong/</id>
    <published>2013-04-08T17:01:00.000Z</published>
    <updated>2014-10-15T08:43:53.000Z</updated>
    
    <content type="html">&lt;p&gt;近日将从博客园陆续搬过来。&lt;/p&gt;
&lt;p&gt;高兴高兴！&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;近日将从博客园陆续搬过来。&lt;/p&gt;
&lt;p&gt;高兴高兴！&lt;br&gt;
    
    </summary>
    
    
      <category term="日常" scheme="http://xudshen.info/tags/%E6%97%A5%E5%B8%B8/"/>
    
  </entry>
  
  <entry>
    <title>自定义控件 之 XAML UIElement的UML图</title>
    <link href="http://xudshen.info/2013/04/08/xaml-ui-element-uml/"/>
    <id>http://xudshen.info/2013/04/08/xaml-ui-element-uml/</id>
    <published>2013-04-08T12:21:00.000Z</published>
    <updated>2014-10-15T11:32:43.000Z</updated>
    
    <content type="html">&lt;p&gt;简单整理了下，列出了自定义控件中比较关键的几个成员，不全，但最近够用了。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;   &lt;img src=&quot;uml.jpg&quot; alt=&quot;uml&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;简单整理了下，列出了自定义控件中比较关键的几个成员，不全，但最近够用了。&lt;/p&gt;
    
    </summary>
    
    
      <category term="WinRT" scheme="http://xudshen.info/tags/WinRT/"/>
    
  </entry>
  
  <entry>
    <title>RIP Google Reader</title>
    <link href="http://xudshen.info/2013/03/22/rip-google-reader/"/>
    <id>http://xudshen.info/2013/03/22/rip-google-reader/</id>
    <published>2013-03-22T06:38:00.000Z</published>
    <updated>2016-03-06T15:26:19.000Z</updated>
    
    <content type="html">&lt;p&gt;可怜Google Reader即将关闭，前几日无聊给Google Reader做的UI也不想用了，&lt;/p&gt;
&lt;p&gt;以此祭奠远去的Google Reader。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;首页 &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2013/03/22/rip-google-reader/gr1.jpg&quot; alt=&quot;首页&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;订阅的RSS列表 &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;gr2.jpg&quot; alt=&quot;订阅的RSS列表&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;查看某篇文章&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;gr3.jpg&quot; alt=&quot;查看某篇文章&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;可怜Google Reader即将关闭，前几日无聊给Google Reader做的UI也不想用了，&lt;/p&gt;
&lt;p&gt;以此祭奠远去的Google Reader。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;首页 &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2013/03/22/rip-google-reader/gr1.jpg&quot; alt=&quot;首页&quot;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="设计" scheme="http://xudshen.info/tags/%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
</feed>
